âœ… What is HAVING Clause?

ğŸ‘‰ HAVING is used to filter grouped data.
ğŸ‘‰ It is used with GROUP BY.
ğŸ‘‰ It works on aggregate functions like:

COUNT()

SUM()

AVG()

MIN()

MAX()

ğŸ§  Why HAVING is Needed?

You already know WHERE filters rows.

But â— WHERE cannot filter aggregate results.

Thatâ€™s why HAVING exists.

ğŸ§¾ Syntax
SELECT column, AGGREGATE_FUNCTION(column)
FROM table
GROUP BY column
HAVING condition;

ğŸ”¥ Real World Example 1 â€” Company Salary Analysis
Table: employees
id	name	dept	salary
1	Ravi	IT	50000
2	Priya	IT	60000
3	John	HR	40000
4	Meena	HR	45000
5	Amit	Sales	70000


ğŸ¯ Scenario:

ğŸ‘‰ Find departments where total salary > 100000

Query:
SELECT dept, SUM(salary) AS total_salary
FROM employees
GROUP BY dept
HAVING SUM(salary) > 100000;

Explanation:

GROUP BY dept â†’ groups employees by department

SUM(salary) â†’ calculates total salary per dept

HAVING filters grouped results

Output:
dept	total_salary
IT	110000
ğŸ”¥ Real World Example 2 â€” E-commerce Website
Table: orders
order_id	customer_id	amount
1	101	500
2	102	200
3	101	700
4	103	100
5	101	300
ğŸ¯ Scenario:

ğŸ‘‰ Find customers who placed more than 2 orders

Query:
SELECT customer_id, COUNT(*) AS total_orders
FROM orders
GROUP BY customer_id
HAVING COUNT(*) > 2;

Output:
customer_id	total_orders
101	3
ğŸ”¥ Real World Example 3 â€” College System
Table: marks
student	subject	marks
Ravi	Math	80
Ravi	Science	75
Priya	Math	60
Priya	Science	65
ğŸ¯ Scenario:

ğŸ‘‰ Find students whose average marks > 70

SELECT student, AVG(marks) AS avg_marks
FROM marks
GROUP BY student
HAVING AVG(marks) > 70;


Output:

student	avg_marks
Ravi	77.5
ğŸ§  Difference Between WHERE and HAVING
WHERE	HAVING
Filters rows	Filters grouped data
Used before GROUP BY	Used after GROUP BY
Cannot use aggregate	Can use aggregate
Faster	Slightly slower
ğŸ”¥ Execution Order (Very Important for Interviews)

SQL runs in this order:

FROM

WHERE

GROUP BY

HAVING

SELECT

ORDER BY

ğŸ‘‰ Thatâ€™s why WHERE cannot use SUM(), COUNT() etc.

âŒ Common Mistake

Wrong âŒ:

SELECT dept, SUM(salary)
FROM employees
WHERE SUM(salary) > 100000
GROUP BY dept;


ğŸ‘‰ ERROR âŒ

Correct âœ…:

SELECT dept, SUM(salary)
FROM employees
GROUP BY dept
HAVING SUM(salary) > 100000;

ğŸ”¥ Advanced Example (WHERE + HAVING Together)

ğŸ‘‰ Find departments where:

Employees salary > 40000

Total dept salary > 100000

SELECT dept, SUM(salary)
FROM employees
WHERE salary > 40000
GROUP BY dept
HAVING SUM(salary) > 100000;

ğŸ’¡ Real Corporate Use Cases

HAVING is used in:

Sales reports

Banking transaction analysis

Customer segmentation

Fraud detection

Performance analysis

Data analytics dashboards

ğŸ¯ Interview Questions
Q1: Can HAVING be used without GROUP BY?

Yes âœ…
But rarely used.

Example:

SELECT COUNT(*) 
FROM employees
HAVING COUNT(*) > 5;

Q2: Which runs first WHERE or HAVING?

ğŸ‘‰ WHERE runs first.

ğŸš€ Now Challenge for You

Table: sales

product	amount
A	100
A	200
B	50
B	60

ğŸ‘‰ Write query to find products whose total sales > 250.

Try it ğŸ˜
